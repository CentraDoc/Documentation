<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.3.10: http://docutils.sourceforge.net/" />
<title>CentraDoc 6.3 - Summary of Changes since 6.2.3</title>
<style type="text/css">

/*
:Authors: Ian Bicking, Michael Foord
:Contact: fuzzyman@voidspace.org.uk
:Date: 2005/08/26
:Version: 0.1.0
:Copyright: This stylesheet has been placed in the public domain.

Stylesheet for Docutils.
Based on ``blue_box.css`` by Ian Bicking
and ``html4css1.css`` revision 1.46.
*/

/*inlining html4css1.css*/

/*
:Author: David Goodger
:Contact: goodger@users.sourceforge.net
:Date: $Date: 2005-12-13 01:29:08 +0100 (Tue, 13 Dec 2005) $
:Revision: $Revision: 4185 $
:Copyright: This stylesheet has been placed in the public domain.

Default cascading style sheet for the HTML output of Docutils.

See http://docutils.sf.net/docs/howto/html-stylesheets.html for how to
customize this style sheet.
*/

/* used to remove borders from tables and images */
.borderless, .borderless td {border: 0;}

/* "! important" is used here to override other ``margin-top`` and
   ``margin-bottom`` styles that are later in the stylesheet or
   more specific.  See http://www.w3.org/TR/CSS1#the-cascade */
.first {
  margin-top: 0 ! important }

.last, .with-subtitle {
  margin-bottom: 0 ! important }

.hidden {
  display: none }

a.toc-backref {
  text-decoration: none ;
  color: black }

blockquote.epigraph {
  margin: 2em 5em ; }

dl.docutils dd {
  margin-bottom: 0.5em }

/* Uncomment (and remove this text!) to get bold-faced definition list terms
dl.docutils dt {
  font-weight: bold }
*/

div.abstract {
  margin: 2em 5em }

div.abstract p.topic-title {
  font-weight: bold ;
  text-align: center }

div.admonition, div.attention, div.caution, div.danger, div.error,
div.hint, div.important, div.note, div.tip, div.warning {
  margin: 2em ;
  border: medium outset ;
  padding: 1em }

div.admonition p.admonition-title, div.hint p.admonition-title,
div.important p.admonition-title, div.note p.admonition-title,
div.tip p.admonition-title {
  font-weight: bold ;
  font-family: sans-serif }

div.attention p.admonition-title, div.caution p.admonition-title,
div.danger p.admonition-title, div.error p.admonition-title,
div.warning p.admonition-title {
  color: red ;
  font-weight: bold ;
  font-family: sans-serif }

/* Uncomment (and remove this text!) to get reduced vertical space in
   compound paragraphs.
div.compound .compound-first, div.compound .compound-middle {
  margin-bottom: 0.5em }

div.compound .compound-last, div.compound .compound-middle {
  margin-top: 0.5em }
*/

div.dedication {
  margin: 2em 5em ;
  text-align: center ;
  font-style: italic }

div.dedication p.topic-title {
  font-weight: bold ;
  font-style: normal }

div.figure {
  margin-left: 2em ;
  margin-right: 2em }

div.footer, div.header {
  clear: both;
  font-size: smaller }

div.line-block {
  display: block ;
  margin-top: 1em ;
  margin-bottom: 1em }

div.line-block div.line-block {
  margin-top: 0 ;
  margin-bottom: 0 ;
  margin-left: 1.5em }

div.sidebar {
  margin-left: 1em ;
  border: medium outset ;
  padding: 1em ;
  background-color: #ffffee ;
  width: 40% ;
  float: right ;
  clear: right }

div.sidebar p.rubric {
  font-family: sans-serif ;
  font-size: medium }

div.system-messages {
  margin: 5em }

div.system-messages h1 {
  color: red }

div.system-message {
  border: medium outset ;
  padding: 1em }

div.system-message p.system-message-title {
  color: red ;
  font-weight: bold }

div.topic {
  margin: 2em }

h1.section-subtitle, h2.section-subtitle, h3.section-subtitle,
h4.section-subtitle, h5.section-subtitle, h6.section-subtitle {
  margin-top: 0.4em }

h1.title {
  text-align: center }

h2.subtitle {
  text-align: center }

hr.docutils {
  width: 75% }

img.align-left {
  clear: left }

img.align-right {
  clear: right }

ol.simple, ul.simple {
  margin-bottom: 1em }

ol.arabic {
  list-style: decimal }

ol.loweralpha {
  list-style: lower-alpha }

ol.upperalpha {
  list-style: upper-alpha }

ol.lowerroman {
  list-style: lower-roman }

ol.upperroman {
  list-style: upper-roman }

p.attribution {
  text-align: right ;
  margin-left: 50% }

p.caption {
  font-style: italic }

p.credits {
  font-style: italic ;
  font-size: smaller }

p.label {
  white-space: nowrap }

p.rubric {
  font-weight: bold ;
  font-size: larger ;
  color: maroon ;
  text-align: center }

p.sidebar-title {
  font-family: sans-serif ;
  font-weight: bold ;
  font-size: larger }

p.sidebar-subtitle {
  font-family: sans-serif ;
  font-weight: bold }

p.topic-title {
  font-weight: bold }

pre.address {
  margin-bottom: 0 ;
  margin-top: 0 ;
  font-family: serif ;
  font-size: 100% }

pre.literal-block, pre.doctest-block {
  margin-left: 2em ;
  margin-right: 2em ;
  background-color: #eeeeee }

span.classifier {
  font-family: sans-serif ;
  font-style: oblique }

span.classifier-delimiter {
  font-family: sans-serif ;
  font-weight: bold }

span.interpreted {
  font-family: sans-serif }

span.option {
  white-space: nowrap }

span.pre {
  white-space: pre }

span.problematic {
  color: red }

span.section-subtitle {
  /* font-size relative to parent (h1..h6 element) */
  font-size: 80% }

table.citation {
  border-left: solid 1px gray;
  margin-left: 1px }

table.docinfo {
  margin: 2em 4em }

table.docutils {
  margin-top: 0.5em ;
  margin-bottom: 0.5em }

table.footnote {
  border-left: solid 1px black;
  margin-left: 1px }

table.docutils td, table.docutils th,
table.docinfo td, table.docinfo th {
  padding-left: 0.5em ;
  padding-right: 0.5em ;
  vertical-align: top }

table.docutils th.field-name, table.docinfo th.docinfo-name {
  font-weight: bold ;
  text-align: left ;
  white-space: nowrap ;
  padding-left: 0 }

h1 tt.docutils, h2 tt.docutils, h3 tt.docutils,
h4 tt.docutils, h5 tt.docutils, h6 tt.docutils {
  font-size: 100% }

tt.docutils {
  background-color: #eeeeee }

ul.auto-toc {
  list-style-type: none }
/*end inline*/

body {
  font-family: Arial, sans-serif;
  /* this doesn't work in IE.  oh well */
  max-width: 50em;
}

em, i {
  /* Typically serif fonts have much nicer italics */
  font-family: Times New Roman, Times, serif;
}

a.target {
  color: blue;
}

a.target {
  color: blue;
}

a.toc-backref {
  text-decoration: none;
  color: black;
}

a.toc-backref:hover {
  background-color: inherit;
}

a:hover {
  background-color: #cccccc;
}

div.attention, div.caution, div.danger, div.error, div.hint,
div.important, div.note, div.tip, div.warning {
  background-color: #cccccc;
  padding: 3px;
  width: 80%;
}

div.admonition p.admonition-title, div.hint p.admonition-title,
div.important p.admonition-title, div.note p.admonition-title,
div.tip p.admonition-title  {
  text-align: center;
  background-color: #999999;
  display: block;
  margin: 0;
}

div.attention p.admonition-title, div.caution p.admonition-title,
div.danger p.admonition-title, div.error p.admonition-title,
div.warning p.admonition-title {
  color: #cc0000;
  font-family: sans-serif;
  text-align: center;
  background-color: #999999;
  display: block;
  margin: 0;
}

h1, h2, h3, h4, h5, h6 {
  font-family: Helvetica, Arial, sans-serif;
  border: thin solid black;
  /* This makes the borders rounded on Mozilla, which pleases me */
  -moz-border-radius: 8px;
  padding: 4px;
}

h1,h2 {
  background-color: #444499;
  color: #ffffff;
  border: medium solid black;
}

h1 a.toc-backref, h2 a.toc-backref {
  color: #ffffff;
}

h3, h4, h5, h6 {
  background-color: #cccccc;
  color: #000000;
}

h3 a.toc-backref, h4 a.toc-backref, h5 a.toc-backref,
h6 a.toc-backref {
  color: #000000;
}

h1.title {
  text-align: center;
  background-color: #444499;
  color: #eeeeee;
  border: thick solid black;
  -moz-border-radius: 20px;
}

h2.title {
  text-align: center;
  background-color: #444499;
  color: #eeeeee;
  border: thick solid black;
  -moz-border-radius: 20px;
}

table.footnote {
  padding-left: 0.5ex;
}

table.citation {
  padding-left: 0.5ex
}

pre.literal-block, pre.doctest-block {
  border: thin black solid;
  padding: 5px;
}

.image img { border-style : solid;
            border-width : 2px;
}

h1 tt, h2 tt, h3 tt, h4 tt, h5 tt, h6 tt {
  font-size: 100%;
}

code, tt {
  color: #000066;
}

p.topic-title {
  font-size: 150%;
  font-weight: bold
}



</style>
</head>
<body>
<div class="document" id="centradoc-6-3-summary-of-changes-since-6-2-3">
<h1 class="title">CentraDoc 6.3 - Summary of Changes since 6.2.3</h1>
<div class="section">
<h2><a id="introduction" name="introduction">Introduction</a></h2>
<!-- (This document covers changes to Liberty CentraDoc trunk,
revision r7600 through r8041) -->
<p>CentraDoc 6.3 has useful enhancements, some high profile bug fixes, and a
number of lower profile bug fixes.  Significant enhancements to the RIP
include driver patterns, wide pixels, and more transparency, overprint,
and blendmode fixes.</p>
<p>Most of the issues are listed here by ticket number.  If you have any
questions about a specific ticket or issue, please contact <a class="reference" href="http://www.lib-sys.com">Liberty
Technology Systems</a>.</p>
</div>
<div class="section">
<h2><a id="enhancements-and-upgrades" name="enhancements-and-upgrades">Enhancements and Upgrades</a></h2>
<p><strong>#13</strong> Driver Patterns</p>
<ul class="simple">
<li>The RIP now has extensive pattern support which can radically improve
performance for some pathological files.  The <a class="reference" href="#dvpatternpoly">DvPatternPoly</a> protocol has been
added to the psdv driver interface; more details about <a class="reference" href="#dvpatternpoly">DvPatternPoly</a> below.</li>
</ul>
<p><strong>#414</strong> The RIP once again supports wide pixels (16 bits per component)</p>
<p><strong>#536</strong> Support for the <a class="reference" href="http://www.hpl.hp.com/personal/Hans_Boehm/gc/">Boehm Garbage Collector</a> :</p>
<ul class="simple">
<li>define <tt class="docutils literal"><span class="pre">USE_GC</span></tt> at compile time and link with the GC library.  This is a
work around for memory usage in some problematic PostScript files, but is
considered somewhat experimental and is not the default build configuration.
Tested with GC 6.8.</li>
</ul>
<p><strong>#543</strong> Upgraded Little CMS to 1.17 and integrated security fixes (<strong>#286</strong>)</p>
<p><strong>#593</strong> PvSDK functions for drawing only the requested PDF Layer:</p>
<pre class="literal-block">
LsHandle LS_API LS_HandleFromPdf(PdfPtr pdf);
PdfPtr LS_API LS_PdfFromHandle(LsHandle h);
int LS_API LS_InstallLayerFilter(LsHandle h, const char *layerName, int isThumbnail);
int LS_API LS_RemoveLayerFilter(LsHandle h);
</pre>
<ul class="simple">
<li>Install a layer filter and then use any of the <tt class="docutils literal"><span class="pre">LS_</span></tt> rendering functions.
Use pdfdoc/pdflayer.d to get layer names from the PDF file.</li>
</ul>
<p><strong>#606</strong> Upgraded FreeType to 2.3.6</p>
<ul class="simple">
<li>integrated LtS FreeType patches <strong>#286, #422, #456</strong></li>
<li>included patch for FreeType bug #23556</li>
</ul>
<p><strong>#616</strong> Support for listing and extracting PDF Attachments</p>
<ul class="simple">
<li>Class PdfAttachment &amp; PdfAttachments in pdfdoc/pdftree.d</li>
<li>Example program (pdfdoc/ut/pdfattach.c) available</li>
<li>PDF Write support for attachments not implemented yet</li>
</ul>
</div>
<div class="section">
<h2><a id="high-profile-tickets" name="high-profile-tickets">High Profile Tickets</a></h2>
<p><strong>#241</strong> Attempting to work out problems with rotated Japanese text.  This
includes an informative mapping of Adobe-Japan1 CIDs to help detect cases
where Unicode values are not unique (gfx/japan1cid.c&amp;h).  The PDF dvpsi
layer automatically switches fonts when needed.  There is a heavy Windows
bias in the implementation.  This issue will need revisiting for
consistency, and for handling similar issues for Korean and Chinese
glyphs.  Contact <a class="reference" href="http://www.lib-sys.com">Liberty Systems</a> for more information.</p>
<p><strong>#510</strong> Numerous fixes for the RIP transparency implementation</p>
<p><strong>#513, #527, #539, #542</strong> PostScript CIDFont and resource issues.  Much
improved support for CID fonts and CMaps in PostScript, including
resolving a number of resource related problems, charpath for type 0
fonts, etc.  <tt class="docutils literal"><span class="pre">PSDVTEXT</span></tt> for PostScript wide fonts now includes CIDs in
proper byte order (to match PDF).</p>
<p><strong>#572</strong> Implement non-separable blend modes in RIP, and fixes for several
other blend modes when rendering CMYK</p>
<p><strong>#574</strong> PostScript pattern cell clipping (was in PDF, new to PostScript);
Since this can be a performance hit on some drivers,
define <tt class="docutils literal"><span class="pre">NO_PATTERN_CELL_CLIP</span></tt> to turn it off.</p>
<p><strong>#614</strong> Note: <tt class="docutils literal"><span class="pre">PS_CONFIG</span> <span class="pre">pdfCropped</span></tt> should be set to 1 (crop box) for
best results</p>
<p><strong>#617</strong> The psisys / psimon error return value was still confusing, and
has been cleaned up.</p>
<ul class="simple">
<li>psimon returns :<ul>
<li>0 == more processing</li>
<li>-1 == EOF, no error</li>
<li>&gt;0 == error, should == <tt class="docutils literal"><span class="pre">psc-&gt;signalerr</span></tt></li>
</ul>
</li>
<li>psisys returns:<ul>
<li>0 == no error</li>
<li>&gt;0 == error, should == <tt class="docutils literal"><span class="pre">psc-&gt;signalerr</span></tt></li>
</ul>
</li>
</ul>
<p>Check the <tt class="docutils literal"><span class="pre">PS_CONFIG</span> <span class="pre">signalerr</span></tt> value after the function
call to see if an error occurred.</p>
</div>
<div class="section">
<h2><a id="assorted-other-tickets" name="assorted-other-tickets">Assorted Other Tickets</a></h2>
<p><strong>#142</strong> PDF Output PDF/A-1b compatibility for tooltips and links</p>
<ul class="simple">
<li>all annotations marked as printable</li>
<li>tooltip button now has an empty appearance stream</li>
</ul>
<p><strong>#412</strong> allowing more operators in PDF pattern limit
(one of the pathological pattern traps)</p>
<p><strong>#506</strong> PDF DeviceN colorspace with alternate Lab space fixed</p>
<p><strong>#507</strong> Improved font name comparison for handling spaces and PS/MT
name decorations.  See also <strong>#501</strong> (6.2.3)</p>
<p><strong>#508</strong> Odd PDF: Acrobat tolerates some bad CCITT input (monochrome image compression)</p>
<p><strong>#509</strong> CMap character set handle trailing -UTF-16</p>
<p><strong>#511</strong> PDF pattern issues (more pathological PDF files)</p>
<ul class="simple">
<li>disable PDF pattern limit check if large pattern cell</li>
<li>pattern clipping fixes</li>
<li>pattern alignment fixes</li>
<li>path containing only a close was causing a bomb in some circumstances</li>
</ul>
<p><strong>#512, #513</strong> PostScript properly handle error aborting in light of internal 'stopped' constructs.</p>
<p><strong>#514</strong> Odd PDF: Don't choke on scientific notation in PDF input</p>
<p><strong>#515</strong> Odd PDF:</p>
<ul class="simple">
<li>handle type 3 font with too many encoding entries</li>
<li>handle odd length hex strings</li>
<li>PDF text mode clip not working in RIP</li>
<li><strong>#592</strong> fixes a bug in <strong>#515</strong></li>
</ul>
<p><strong>#516</strong> PostScript DvChar init chr.n_pts to zero before driver call</p>
<p><strong>#517</strong> Odd PDF: if MediaBox inside CropBox, swap, for consistency</p>
<p><strong>#525</strong> bump up MAX_COLOR_COMPONENTS and MAX_SAMPLE_DIMENSIONS for
DeviceN.  Example PDF file has 10 color elements in DeviceN;
PDF Reference says Adobe allows up to 32</p>
<p><strong>#528</strong> PDF Driver interface emulating PostScript graphic state and
PostScript image row callbacks, various ways and means of stompage
fixed.</p>
<p><strong>#530</strong> PDF pattern performance improvement by preclipping the target area</p>
<p><strong>#531</strong> Various build issues</p>
<ul class="simple">
<li>Jasper HAVE_STDINT_H defined confusion</li>
<li>option for NO_AGG_NAMESPACE in vital C++/AntiGrain code</li>
<li>attempting to force instantiation of template globals for AIX C++ build</li>
</ul>
<p><strong>#534</strong> Odd PDF: Acrobat tolerates &quot;-&quot; as a number</p>
<p><strong>#535</strong> Odd PDF: Handle invalid /Annots object</p>
<p><strong>#536</strong> PostScript add ScaleMatrix to font dictionary on makefont, for
compatibility with some PostScript files</p>
<p><strong>#543</strong> Better error handling for some corrupted PDF files</p>
<ul class="simple">
<li>includes Little CMS upgrade and some patches</li>
<li>PDF detect bogus ICC profile and continue instead of stopping</li>
<li>ignore invalid restore (Q operator)</li>
<li>corrupted memory if corrupted font memory buffer was &quot;too short&quot;</li>
<li>errors cleaning up during driver exception (see also <strong>#528</strong>)</li>
</ul>
<p><strong>#544</strong> Odd PDF: file with BaseFont as string instead of name as documented</p>
<p><strong>#549</strong> Odd PDF: Acrobat allows broken jbig2 input.
The example file's images have a trailing long word and no end markers</p>
<p><strong>#553</strong> <tt class="docutils literal"><span class="pre">gxc-&gt;auto_page_translate</span></tt> / AutoPageTranslate=Y broken in <strong>#318</strong> -
PostScript comment parsing backwards</p>
<p><strong>#554</strong> PostScript driver needs to ignore charem signals if text rendering mode != fill.
Set color inside a type 3 proc (using setcachedevice) isn't kosher</p>
<p><strong>#555</strong> PDF forms now generating appearances for some field types when needed</p>
<p><strong>#557</strong> Unknown annotation types are legal PDF input.</p>
<p><strong>#558</strong> <tt class="docutils literal"><span class="pre">PSDVTEXT</span></tt> and <tt class="docutils literal"><span class="pre">PSDVCHAREM</span></tt> text mode missing stroke width parameter;
also: call stroke even if the color is the same as fill</p>
<p><strong>#559</strong> PDF some fixes for XRef streams</p>
<p><strong>#561</strong> Adobe Copyright says we're not supposted to modify the CMaps.
Removed minor tweaks to Japan and Korean CMaps introduced to handle a few
special arrow characters missing from the Windows fonts.  This still
requires fixing using the model for <strong>#241</strong>.</p>
<p><strong>#563</strong> Fix for PostScript Dingbats with <tt class="docutils literal"><span class="pre">gxc-&gt;want_unicode</span></tt>.
Windows Monotype Sorts isn't a Unicode font (neither is Windows Symbol),
so Unicode encoding doesn't work.  Some possible trouble spots:
The <tt class="docutils literal"><span class="pre">gxs-&gt;symbol</span></tt> semantics are somewhat slippery, and have changed.
This could conceivably cause problems with some drivers, although it
is unlikely.</p>
<p><strong>#565</strong> PDF fix for <tt class="docutils literal"><span class="pre">gxc-&gt;want_unicode</span></tt> and <tt class="docutils literal"><span class="pre">gxc-&gt;multichar</span></tt> which
helps font substitution calibration</p>
<p><strong>#566</strong> PostScript &#64;PJL proc, don't read ahead inside macro; fixes parse error.</p>
<p><strong>#567</strong> PDF correctly track both end-of-char and next-char for correct
1-at-a-time character placement</p>
<p><strong>#568</strong> PDF Pattern object management bomb fixed</p>
<p><strong>#577</strong> sprintf cleanup (<strong>#286</strong>) broke PDF Type 3 font output (Distiller)
(for strings with octal escapes)</p>
<p><strong>#578</strong> From <strong>#447</strong> Image Limits (6.2.3):
take monochrome into account when checking image limits</p>
<p><strong>#579</strong> Pdf Write allow kDestUnknown in PdfOutline_AppendFull for a null bookmark</p>
<p><strong>#581</strong> PostScript output driver (psdvps2.c) attempt to use meaningful
text encoding</p>
<p><strong>#588</strong> Function Type 2 bomb calculating range if no C1 supplied</p>
<p><strong>#589</strong> Odd PDF: allow for obnoxiously long number strings;
the limit was 31 characters, here is what we were choking on:
63803055350928782000000000000000000000.000000 (Maybe there's a bug in the
producer program?  This value should be between 0 and 1...)</p>
<p><strong>#591</strong> PDF ini options to automatically replace PDF Highlight annotation
appearance streams.  Also a fix for annotation Quadpoints handling.</p>
<p>The old style uses a yellow rectangle, the new style yellow blended.
Drivers that don't like the new style should use PdfHighlightUnder=Y to
get the old style.  Drivers that want the new style should set
PdfHighlightOver=Y instead.</p>
<p>The behavior of the new style PdfHighlightOver=Y (use alpha or use blend
mode), can be configured by defines near the top of pdfannot.c:</p>
<pre class="literal-block">
/* define ONE of these */
/*#define HIGHLIGHT_ALPHA (.4)*/
#define HIGHLIGHT_BLEND &quot;/Multiply&quot;
</pre>
<p><strong>#593</strong> PDF Adobe Illustrator layers behave more like part of the normal
PDF optional content layers in the PdfLayer APIs.  Also added
PdfLayer_IsLocked (AI layer specific) flag query and <tt class="docutils literal"><span class="pre">is_locked</span></tt> to the
<tt class="docutils literal"><span class="pre">PSDVLAYER</span></tt> driver parameter block.</p>
<p><strong>#596</strong> RIP direct monochrome image support added back in for performance.
Converting monochrome images to full RGBA can use too much memory.</p>
<p><strong>#597</strong> Turn on emulation for small 1 pixel tall images;
similar to the emulation for image masks (pathological input files).</p>
<p><strong>#599</strong> Missing error check on fflush (missed a disk full error)</p>
<p><strong>#602</strong> Odd PDF: embedded truetype font with no charmaps caused bomb</p>
<p><strong>#605</strong> PDF Write Type 3 FontBBox fix;
Acrobat 8 Clipping problem if Alpha != 1</p>
<p><strong>#607</strong> RIP option for floating point image placement:
define <tt class="docutils literal"><span class="pre">RIP_FLOAT_IMAGE_PLACEMENT</span></tt> - not the default yet (just in case)</p>
<p><strong>#614</strong> PDF <tt class="docutils literal"><span class="pre">float</span> <span class="pre">PSDVLINE</span> <span class="pre">line_width</span></tt> was still passed as an integer</p>
<p><strong>#622</strong> Odd PDF: Handle <tt class="docutils literal"><span class="pre">/Type</span> <span class="pre">/PagE</span></tt> name object as <tt class="docutils literal"><span class="pre">/Type</span> <span class="pre">/Page</span></tt></p>
</div>
<div class="section">
<h2><a id="some-unticketed-issues" name="some-unticketed-issues">Some unticketed issues</a></h2>
<ul class="simple">
<li>Color Manager Vector Color transforms in the same space (e.g. RGB to RGB)
broken way back in revision 5300, 2005.11.05</li>
<li>Checking etc_path[0] in setup search path prevents failure elsewhere (ffs)</li>
<li>Check for cases where clipping rgn gets returned as null (cliplvl != 3)</li>
<li>Emulation with TrueType Symbol font fixed encoding problems</li>
<li>RIP/VITAL path leakage if dash emulation</li>
<li>RIP/VITAL clipping save/restore model was wrong</li>
<li>RIP/VITAL path save/restore stack not maintained correctly</li>
<li>RIP AntiGrain doesn't stroke correctly in even-odd winding mode</li>
</ul>
</div>
<div class="section">
<h2><a id="more-details-about-the-dvpatternpoly-implementation" name="more-details-about-the-dvpatternpoly-implementation"><span id="dvpatternpoly"></span>More details about the DvPatternPoly implementation</a></h2>
<p>The <tt class="docutils literal"><span class="pre">DvPatternPoly</span></tt> driver call is a mechanism to capture a pattern and
claim responsibility for rendering polygons using that pattern.  This can
greatly increase performance and quality of pattern rendering.</p>
<p>Capturing and rendering is difficult, especially if the pattern
matrix is arbitrary.  The RIP can be used as a reference implementation.</p>
<p>Set <tt class="docutils literal"><span class="pre">gxc-&gt;want_patterns</span></tt> and the driver will get <tt class="docutils literal"><span class="pre">DvPatternPoly</span></tt> with
a <tt class="docutils literal"><span class="pre">PSDVPATTERNPOLY</span></tt> when a pattern polygon is to be drawn.
<tt class="docutils literal"><span class="pre">PSDVPATTERNPOLY</span></tt> contains a <tt class="docutils literal"><span class="pre">PSDVPOLY</span></tt> struct, along with a
<tt class="docutils literal"><span class="pre">ClrPatPtr</span></tt> object representing the pattern.  The Driver can fail the
<tt class="docutils literal"><span class="pre">DvPatternPoly</span></tt> call (<tt class="docutils literal"><span class="pre">return</span> <span class="pre">!0;</span></tt>) and the normal pattern rendering will
be invoked.</p>
<p>ClrPat methods specific to pattern capture:</p>
<pre class="literal-block">
ClrPat_GetPatternInfo(clrpat, clrpatinfo);
ClrPat_ScalePatternInfo(clrpat, matrix);
ClrPat_FillTemplate(clrpat, pth, winding);
</pre>
<p>There are two phases to DvPatternPoly implementation:</p>
<ul class="simple">
<li>Capture the pattern
(if the pattern is unknown, or if the pattern matrix has changed,
or if the pattern is a stencil pattern and the color has changed)</li>
<li>Render a captured pattern over the requested polygon / path</li>
</ul>
<p>Capturing a pattern involves preparing a target for capturing the pattern,
scaling the pattern, and invoking ClrPat_FillTemplate, which will cause
the driver to be called with the operations drawing the pattern.
ClrPat_Fill is the normal pattern rendering method; ClrPat_FillTemplate is
like ClrPat_Fill except that is uses a different matrix and turns off
clipping, so the pattern can be captured correctly.</p>
<p>It is up to the driver to prepare a buffer to capture the pattern and
store it for later retrieval.  Although storing the pattern between
DvPatternPoly calls isn't required, it will increase the performance
advantage.  The RIP uses the Props mechanism (gco/notify.d).  It stores
the captured information in a GCO class object instance, and then attaches
that object to the pattern implementation object returned by
GetPatternInfo.  Yes, this is cheating.  Object Models can be very handy.</p>
<p>There are many subtleties in handling pattern matrices and rendering
correctly.  Some drivers may wish to skip skewed or arbitrarily rotated
patterns and only implement normal or scaled patterns rotated on 90'
bounds.  This makes pixel rendering simpler.</p>
<p>Please contact <a class="reference" href="http://www.lib-sys.com">Liberty Systems</a> for assistance.</p>
</div>
<div class="section">
<h2><a id="references" name="references">References</a></h2>
<ul class="simple">
<li><a class="reference" href="http://www.lib-sys.com">Liberty Technology Systems</a></li>
<li><a class="reference" href="http://www.antigrain.com/">Anti-Grain Geometry</a></li>
<li><a class="reference" href="http://www.littlecms.com/">Little cms</a></li>
<li><a class="reference" href="http://www.FreeType.org/">The FreeType Project</a></li>
<li><a class="reference" href="http://www.ijg.org/">Independent JPEG Group</a></li>
<li><a class="reference" href="http://www.ece.uvic.ca/~mdadams/jasper/">The JasPer Project</a></li>
<li><a class="reference" href="http://www.zlib.net/">zlib compression library</a></li>
<li><a class="reference" href="http://www.adobe.com/products/PostScript/pdfs/PLRM.PDF">Adobe PostScript Language Reference</a></li>
<li><a class="reference" href="http://www.adobe.com/devnet/Acrobat/pdfs/pdf_reference.PDF">Adobe PDF Reference, Sixth Edition, version 1.7</a></li>
<li>The <a class="reference" href="http://www.aiim.org/documents/standards/19005-1_FAQ.PDF">PDF/A FAQ</a></li>
<li>The <a class="reference" href="https://committees.standards.org.au/COMMITTEES/IT-021/N0001/ISO_19005-1-2005.PDF">PDF/A Specification</a> (ISO 19005-1-2005)</li>
</ul>
<!-- (Here are some aliased links) -->
<!-- (This file contains reStructuredText directives.
See http://docutils.sourceforge.net/rst.html for more information.) -->
</div>
</div>
</body>
</html>
